#!/bin/bash
# append /home/roowe/acm/bin to $PATH
ac_cc() {
    g++ -std=c++11 -g -o /tmp/$name $filepath
}
ac_run() {
    current=`pwd`
    cd $data_dir
    if [[ -d data ]]; then
        for data in data/*.in; do
            echo "--------------------" $data "--------------------"
            /tmp/$name < $data
        done;
    else
        /tmp/$name
    fi
    cd $current
}
help()
{
    echo "$0 cc problem"  
    echo "$0 run problem"
    echo "$0 test problem"
}
filepath=$2
name=`basename $filepath .cpp`
data_dir=`dirname $filepath`
case $1 in
    'cc')
        ac_cc;;
    'run')
        ac_run $2;;
    'test')
        ac_cc $2 && ac_run $2;;
    *)
        help;;
esac
